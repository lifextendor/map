webpackJsonp([1],{LNgU:function(e,t){},MBDQ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACjUlEQVR42u2XX2jNYRjHj2H/mGYHsaVI5HKJi1lywRWyG7lRYjfkYmuuhLgzJRYhmsXikCJqiSUU4tSKTAoribD8t/w34/PUd/X29jvn7Pc753Czpz51zvP+e973ed7neX+x2LCEk0pYDcfgLryCXrgHx2ENTM3X4qvgAwzAH+iBc3AWHklnbX1Qn8uFS6EVfkEXrE2xy8HTuQ390A7jsl28SLu0xRP6n0lGQxv8hEtQnI0B6+EHHNDEvowUvoyCPTKiKeriU+Az3PF2bgsugWsyzrgOy7Wwa8Qt+A7TohiwA77CAm/SduktIE/BCXgH3+A0FDr9a7SJlii+vwkPYbyjX6dIT3gBNgaOqq3B0Vuf+5CEkjAGlMMzBaArXdp5ecCYsfAauj29GfvS20hGmQCfoNmLbvP37jTjtukKljm6LXLZxDAGWOcvsNXRlemI00V1vfpUObpGGT4pjAEV8AYOevrn8mfQ1SuAq3LDCEe/Cz5CPIwB5s8HcEMTD8p+HfGKgDF1ajvi6MyQy/DYc0tGsR12wBPv6Ow+v9C1a9PdXwaH4a12P9PpH9finV6OGJI0KInUBsTHBR3rgFOAOlUPXJmnWNoUJRHFlVwSAW3FOo1FsBimp8j5h5SOK6Om42YVouoIY2frBPdlU4xmyK9nUkR+KinQyVmszMrGAJtor3xcE2JctTJma0jDA6VQt6F3iA8MqwtPdVtKc/Uqqgvhz53KfCtz+SyzYzypiZem6bdQef98lHufSUr08OgLyA0mc+X3pDJpXsQSy3vVePeVU6VSbRV0fr6/DeYou9ljZbISVreSVu2/+kDZoMJzBS7q90avCuZdGrXwb9j8Pz7TLD9s17Urig1LRPkLuB+XsQs92cAAAAAASUVORK5CYII="},N88Y:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABnElEQVR42mNgGAXkAWkgtgVifyi2hYrRHCgA8S4g/gHEv4H4DxT/hortBGJ5WljMB8QtQPwWiP8TwG+AuAmIeallOQsQzwPif0RYDsMgtTOBmJlSy0EG9ADxXxIsh2GQng4gZqLEAQZA/J4My2EYFGU6lDgAX9D/BOIdUPwTT1RMpSThfcdhKCi1yyGpBaX8PTgc+xGIOclxgBMen6thUa8FxL9w6LEkxwExOAy7hkM9IxDfxaEnjBwHROMw7BIePVdw6IkmxwG2eKJAHYt6TTyJ0ZocB/BCi1dsiXAjEEtAywlQQSUJxFtxJEJQQuYmNydswJPHHwPxfih+gkfdGkrKAW9oRUNuQQTKFe6UOEAciO9T4ABQrhCltD7opMABTdSoDdmA+AUZlj+iRm0IA2nQhgexloPSTQI1GyT8eEo5bPgmEPNQu1VkCMSfiLD8PbReoAloJsIB1bRslAoC8R08ll+iZlsQFwDV/U+xWH4fWm7QBaRhcUAUPTsmTNDG6m9oDVg3EL0jDiDeC60ZWQeqiwaqhoVGe6qUAAA6hy6Gh5Xh9QAAAABJRU5ErkJggg=="},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),i=n("zL8q"),a=n.n(i),o=(n("tvR6"),n("/ocq")),s=n("9bGr"),c=n("gCHX"),l=n("L2CZ"),A=n("1Cty"),u=n("aC3Q"),f=n("eM/O"),w=n("bdNf"),g=n("86p+"),p=n("tOEd"),d=n("6HMI"),h=n("lY9i"),m=n("zOBh"),v=n("HWXU"),U=(n("ktr9"),n("MBDQ")),y=n.n(U),B=n("N88Y"),E=n.n(B),C=n("tYJ7"),P=n.n(C),b="http://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0";var D=void 0;var R=n("p8Td"),k=n("qxxq");var O={name:"Map",mounted:function(){var e=this.$refs.myMap;this.initMap(e),this.resize(),document.body.onresize=this.resize.bind(this)},data:function(){return{msg:"Hello Map"}},methods:{initMap:function(e){var t=this.map=function(e){var t=new s.a({layers:[new l.a({source:new A.a({url:b})})],target:e,controls:f.a.defaults({attributionOptions:{collapsible:!1}}),view:new c.a({center:[12685153.492296234,2577384.2465164554],zoom:12})});return t.on("moveend",function(){var e=t.getView();console.log(e.getCenter()),console.log(e.getZoom())}),t}(e),n=function(e){var t=new g.a;return{source:t,vector:new u.a({source:t,style:new p.a({fill:new d.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new h.a({color:"#ffcc33",width:2}),image:new m.a({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",size:[32,32],src:P.a})})})}}(),r=n.vector,i=n.source,a=function(){var e=new g.a,t=new p.a({text:new v.a({font:'bold 11px "Open Sans", "Arial Unicode MS", "sans-serif"',placement:"point",offsetY:-40,fill:new d.a({color:"#666"})}),image:new m.a({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",size:[32,32],src:y.a})});return{markers:new u.a({declutter:!0,source:e,style:function(e){return t.getText().setText(e.get("name")),t}}),source:e}}().markers;this.vector=r,this.source=i,this.markers=a,t.addLayer(r),t.addLayer(a)},resize:function(){var e=window.innerWidth,t=window.innerHeight;this.map.setSize([e,t])},drawPoint:function(){this.draw=function(e,t){if(D)return D;var n=new p.a({fill:new d.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new h.a({color:"#ffcc33",width:2}),image:new m.a({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",size:[32,32],src:E.a})});return D=new w.a({source:t,style:n,type:"Point"}),e.addInteraction(D),D}(this.map,this.source)},searchPoi:function(){var e=this;this.draw&&this.draw.setActive(!1),function(e){if(e&&!(e.length<1)){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n].getGeometry().clone().transform("EPSG:3857","EPSG:4326");t.push(i.getCoordinates().map(function(e){return e.toFixed(6)}).join(","))}return t.push(t[0]),t=t.join("|"),fetch("http://restapi.amap.com/v3/place/polygon?key=c673e715513d38b5dd75564d8ec4f717&types=050000&polygon="+t+"&keywords=美食&output=json").then(function(e){if(console.log(e),e.status>=200&&e.status<400)return e.json()})}}(this.source.getFeatures()).then(function(t){e.markers.getSource().clear();var n=t.pois;for(var r in n){var i=n[r].location.split(","),a=new k.a([+i[0],+i[1]]);a=a.transform("EPSG:4326","EPSG:3857");var o=new R.a({geometry:a,labelPoint:a.clone(),name:n[r].name});e.markers.getSource().addFeature(o)}})},clear:function(){this.draw&&this.draw.setActive(!1),this.source.clear()},findBestPlace:function(){this.draw&&this.draw.setActive(!1)}}},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"myMap",attrs:{id:"map"}},[n("div",{staticClass:"tools"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-location",circle:""},nativeOn:{click:function(t){return e.drawPoint(t)}}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""},nativeOn:{click:function(t){return e.searchPoi(t)}}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"info",icon:"el-icon-delete",circle:""},nativeOn:{click:function(t){return e.clear(t)}}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"warning",icon:"el-icon-edit-outline",circle:""},nativeOn:{click:function(t){return e.findBestPlace(t)}}})],1)],1)],1)])},staticRenderFns:[]};var x=n("VU/8")(O,Y,!1,function(e){n("wX5p")},"data-v-797752f8",null).exports;r.default.use(o.a);var S=new o.a({routes:[{path:"/",name:"Map",component:x}]}),G={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",[this._v("地图小工具")]),this._v(" "),t("el-main",[t("router-view")],1)],1)},staticRenderFns:[]};var Q=n("VU/8")({name:"App"},G,!1,function(e){n("LNgU")},null,null).exports;r.default.use(a.a,{size:"small"}),r.default.config.productionTip=!1,new r.default({el:"#app",router:S,components:{App:Q},template:"<App/>"})},ktr9:function(e,t){},tYJ7:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACEUlEQVR42u2XyyvEURTHvSeS8loYjyF7IgvPskUsERvyF4hiJxHJY2FjzSwQCxZKFoRk4REbLMYC5VGUUB7j9b31VdOv+/vN3Pnd386tz+bOued8u+fOOecXEfG/wlspoAI0kHLuOb5cYAA8Aj/4JH7u9YM4p4JXgUPwE4R9UKY7eBF4DiH4H0+gQFfwKLADvhUECNsNXQLaTYJ8gVvyZWLTbDd4LNiWOBYPrwvkkW7uGe3WQbQdAWnAJ7neKYntlCRNZyDZjoBMcCm5+haJbatEwAVw2xGQDs4lN9Ajse2VCPDRh63CcyDJ7T3IApEki3tGuwMdhWnU5IU/gBXyYGIzrONvmA/eFWrAH+JMjq5aMBeGgBmdpbgavCkEfwWVOgWIgrSpIGANxOhuSB5wF0Lwa5DhVEvuDUFAp5MDiSirexbBRZqSdAZMYDf0BhSUFJNUXIFE2sTxTBuIDzd4Cdhll1ugGKsW3WgQvsizwkexavBUcMpZb9DEZpK/f3BOlK0hijihT6XH9s0X7bFIzypvx2Vikwtu6KtLRYCX1/oCaoJ0S6tHV0cfwte0ioD6gNb6zMcUqXBe2HYEBBe+alXb8LxhCDliZxTDSCmbVDbJ554YSsbBsWFOnLVIk+UaYw9QmYgDBxfRE0bsjuRF/OI54qsPFtjPD5g+UKiYuqDLzRRMgGWwRZZ4W01O9gFH1i9fvisTPvOjLAAAAABJRU5ErkJggg=="},tvR6:function(e,t){},wX5p:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.540611ad04bb808b0b52.js.map