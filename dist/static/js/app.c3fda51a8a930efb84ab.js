webpackJsonp([1],{"7qna":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a=n("zL8q"),o=n.n(a),i=(n("tvR6"),n("/ocq")),c=n("9bGr"),s=n("gCHX"),l=n("L2CZ"),u=n("1Cty"),f=n("aC3Q"),d=n("eM/O"),p=n("bdNf"),v=n("86p+"),w=n("tOEd"),h=n("6HMI"),m=n("lY9i"),y=n("uODu");n("ktr9");var g=void 0;var k={name:"Map",mounted:function(){var e=this.$refs.myMap;this.initMap(e)},data:function(){return{msg:"Hello Map"}},methods:{initMap:function(e){var t=this.map=function(e){var t=new c.a({layers:[new l.a({source:new u.a({url:"http://t2.supermapcloud.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}"})})],target:e,controls:d.a.defaults({attributionOptions:{collapsible:!1}}),view:new s.a({center:[12685153.492296234,2577384.2465164554],zoom:12})});return t.on("moveend",function(){var e=t.getView();console.log(e.getCenter()),console.log(e.getZoom())}),t}(e),n=function(e){var t=new v.a;return{source:t,vector:new f.a({source:t,style:new w.a({fill:new h.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new m.a({color:"#ffcc33",width:2}),image:new y.a({radius:7,fill:new h.a({color:"#ffcc33"})})})})}}(),r=n.vector,a=n.source,o=function(){var e=new v.a;return{markers:new f.a({source:e,style:new w.a({fill:new h.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new m.a({color:"#ffcc33",width:2}),image:new y.a({radius:7,fill:new h.a({color:"#ffcc33"})})})}),source:e}}().markers;this.vector=r,this.source=a,this.markers=o,t.addLayer(r),t.addLayer(o)},drawPoint:function(){var e,t;this.draw=(e=this.map,t=this.source,g||(g=new p.a({source:t,type:"Point"}),e.addInteraction(g),g))},searchPoi:function(){var e=this;this.draw&&this.draw.setActive(!1),function(e,t){if(e&&!(e.length<1)){for(var n=[],r=0,a=e.length;r<a;r++){var o=e[r].getGeometry().clone().transform("EPSG:3857","EPSG:4326");n.push(o.getCoordinates().map(function(e){return e.toFixed(6)}).join(","))}n.push(n[0]),n=n.join("|"),fetch("http://restapi.amap.com/v3/place/polygon?key=c673e715513d38b5dd75564d8ec4f717&types=050000&polygon="+n+"&keywords=美食&output=json").then(function(e){console.log(e),e.status>=200&&e.status<400&&t(e.body)})}}(this.source.getFeatures(),function(t){e.markers.clear()})},clear:function(){this.draw&&this.draw.setActive(!1),this.source.clear()},findBestPlace:function(){this.draw&&this.draw.setActive(!1)}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"myMap",attrs:{id:"map"}},[n("div",{staticClass:"tools"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-location",circle:""},nativeOn:{click:function(t){return e.drawPoint(t)}}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""},nativeOn:{click:function(t){return e.searchPoi(t)}}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"info",icon:"el-icon-delete",circle:""},nativeOn:{click:function(t){return e.clear(t)}}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"warning",icon:"el-icon-edit-outline",circle:""},nativeOn:{click:function(t){return e.findBestPlace(t)}}})],1)],1)],1)])},staticRenderFns:[]};var _=n("VU/8")(k,b,!1,function(e){n("RRCU")},"data-v-552d5242",null).exports;r.default.use(i.a);var M=new i.a({routes:[{path:"/",name:"Map",component:_}]}),P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",[this._v("Header")]),this._v(" "),t("el-main",[t("router-view")],1)],1)},staticRenderFns:[]};var C=n("VU/8")({name:"App"},P,!1,function(e){n("7qna")},null,null).exports;r.default.use(o.a,{size:"small"}),r.default.config.productionTip=!1,new r.default({el:"#app",router:M,components:{App:C},template:"<App/>"})},RRCU:function(e,t){},ktr9:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c3fda51a8a930efb84ab.js.map